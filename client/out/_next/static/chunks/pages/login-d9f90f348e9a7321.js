(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3459],{36429:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(37644)}])},38293:function(e,s,t){"use strict";t.d(s,{C:function(){return ButtonComp}});var a=t(85893),o=t(65400),r=t.n(o),l=t(87893),n=t.n(l);let ButtonComp=e=>{let{text:s,type:t,onClick:o,disabled:l,loading:i}=e;return(0,a.jsx)(r(),{className:n().ButtonComp,htmlType:t,onClick:o,disabled:l,loading:i,children:s})}},37644:function(e,s,t){"use strict";t.r(s);var a=t(85893),o=t(67294),r=t(97538),l=t(51024),n=t(31059),i=t(11345),d=t.n(i),c=t(41664),u=t.n(c),m=t(5121),h=t(11163),g=t(80912),p=t(86978),v=t(38293);s.default=()=>{let[e]=r.Z.useForm(),s=(0,h.useRouter)(),[t,i]=(0,o.useState)(!1),[c,f]=(0,o.useState)(!1),saveCredentials=(e,s)=>{localStorage.setItem("email",e),localStorage.setItem("password",s)},addToCartFromLS=async e=>{var s=localStorage.getItem("products")&&JSON.parse(localStorage.getItem("products"))||[];(null==s?void 0:s.length)>0&&await m.Z.post("".concat("https://www.shahparts.com/api","/cart/ls-add-to-cart"),{products:s,userId:e}).then(e=>{200===e.status?((0,p.Ik)(e.data.successMessage),getCartProducts()):(0,p.hW)(e.data.errorMessage)}).catch(e=>{console.log(e),(0,p.hW)(null==e?void 0:e.message)})},onFinish=async a=>{f(!0),await m.Z.post("".concat("https://www.shahparts.com/api","/users/login"),{email:a.email,password:a.password}).then(a=>{if(f(!1),200===a.status){var o,r,l,n;(0,g.Ks)(null===(o=a.data)||void 0===o?void 0:o.user,null===(r=a.data)||void 0===r?void 0:r.token);let i=localStorage.getItem("redirectUrl");t?saveCredentials(e.getFieldValue("email"),e.getFieldValue("password")):(localStorage.removeItem("email"),localStorage.removeItem("password")),i?s.push(i):s.push("/"),setTimeout(()=>{document.location.reload()},1e3),addToCartFromLS(null===(n=a.data)||void 0===n?void 0:null===(l=n.user)||void 0===l?void 0:l._id),(0,p.Ik)(a.data.successMessage)}else(0,p.hW)(a.data.errorMessage)}).catch(e=>{f(!1),console.log(e),(0,p.hW)(null==e?void 0:e.message)})};return(0,o.useEffect)(()=>(localStorage.getItem("email")&&e.setFieldsValue({email:localStorage.getItem("email"),password:localStorage.getItem("password")}),()=>{}),[]),(0,a.jsx)("div",{className:d().auth,children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:d().container,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{children:"Log in to your account"}),(0,a.jsxs)(r.Z,{layout:"vertical",form:e,name:"nest-messages",className:d().form,onFinish:onFinish,children:[(0,a.jsx)(r.Z.Item,{name:"email",label:"Username or email address",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}],children:(0,a.jsx)(l.default,{})}),(0,a.jsx)(r.Z.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0,children:(0,a.jsx)(l.default.Password,{})}),(0,a.jsx)(r.Z.Item,{children:(0,a.jsx)(v.C,{type:"submit",text:"Login",loading:c,disabled:c})}),(0,a.jsx)(r.Z.Item,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center mt-[-28px]",children:[(0,a.jsx)("div",{children:(0,a.jsx)(n.default,{onChange:e=>i(e.target.checked),children:"Remember me"})}),(0,a.jsx)("div",{children:(0,a.jsx)(u(),{href:"/forgot-password",children:"Forgot Password?"})})]})})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)("div",{children:"Donâ€™t have an account?"}),(0,a.jsx)(u(),{href:"/signup",children:"Signup"})]})]})})})})}},87893:function(e){e.exports={ButtonComp:"ButtonComp_ButtonComp__irX7_"}},11345:function(e){e.exports={auth:"auth_auth__0Kn3K",container:"auth_container__Ngwue",form:"auth_form__otHTA"}}},function(e){e.O(0,[4055,7538,1059,9774,2888,179],function(){return e(e.s=36429)}),_N_E=e.O()}]);