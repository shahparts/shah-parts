(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8209],{42678:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/products",function(){return l(3804)}])},38293:function(e,t,l){"use strict";l.d(t,{C:function(){return ButtonComp}});var i=l(85893),a=l(65400),n=l.n(a),r=l(87893),o=l.n(r);let ButtonComp=e=>{let{text:t,type:l,onClick:a,disabled:r,loading:d}=e;return(0,i.jsx)(n(),{className:o().ButtonComp,htmlType:l,onClick:a,disabled:r,loading:d,children:t})}},63222:function(e,t,l){"use strict";l.d(t,{Z:function(){return Loading_Loading}});var i=l(85893),a=l(25675),n=l.n(a);l(67294);var r={src:"/_next/static/media/loading.5fd12965.gif",height:200,width:200,blurWidth:0,blurHeight:0},Loading_Loading=()=>(0,i.jsx)("div",{className:"flex justify-center items-center",children:(0,i.jsx)("div",{className:"w-[60px]",children:(0,i.jsx)(n(),{src:r,alt:"Spinning Tom Nook Loading Icon",width:100,height:100})})})},80979:function(e,t,l){"use strict";l.d(t,{Z:function(){return Admin_AdminLayout}});var i=l(85893),a=l(80912),n=l(63222),r=l(5789),o=l(55673),d=l(11163),s=l(67294),c=l(41664),u=l.n(c),v=l(5005),p=l(78390),h=l(53598),x=l(606),m=l(73771),g=l.n(m),Admin_AdminSidebar=()=>{let e=(0,d.useRouter)();return(0,i.jsx)("div",{className:g().AdminSidebar,children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:g().linkContainer,children:[(0,i.jsx)("div",{className:g().linkWrapper,children:(0,i.jsx)(u(),{href:"/admin/dashboard",children:(0,i.jsxs)("button",{className:"".concat("/admin/dashboard"===e.pathname?g().activeLink:g().inactiveLink),children:[(0,i.jsx)(v.Z,{}),(0,i.jsx)("span",{children:"Dashboard"})]})})}),(0,i.jsx)("div",{className:g().linkWrapper,children:(0,i.jsx)(u(),{href:"/admin/products",children:(0,i.jsxs)("button",{className:"".concat("/admin/products"===e.pathname?g().activeLink:g().inactiveLink),children:[(0,i.jsx)(x.Z,{}),(0,i.jsx)("span",{children:"Products"})]})})}),(0,i.jsx)("div",{className:g().linkWrapper,children:(0,i.jsx)(u(),{href:"/admin/orders",children:(0,i.jsxs)("button",{className:"".concat("/admin/orders"===e.pathname?g().activeLink:g().inactiveLink),children:[(0,i.jsx)(h.Z,{}),(0,i.jsx)("span",{children:"Orders"})]})})})]}),(0,i.jsx)("div",{className:g().logoutWrapper,children:(0,i.jsxs)("a",{href:"/login",onClick:a.kS,className:g().logoutButton,children:[(0,i.jsx)("span",{className:g().logoutText,children:"Logout"}),(0,i.jsx)(p.Z,{})]})})]})})},Admin_AdminLayout=e=>{let t=(0,d.useRouter)(),[l,c]=(0,s.useState)(!0),[u,v]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{(0,a.$8)()&&1===(0,a.$8)().role||t.push("/login"),c(!1)},[]),l?(0,i.jsx)(n.Z,{}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"xxl:container mx-auto AdminLayout bg-[#F5F8FB] ".concat(u&&"blackMask"),children:e.sidebar?(0,i.jsxs)(o.Z,{className:"block md:flex mt-0",children:[(0,i.jsx)(r.Z,{xs:24,lg:4,className:"hidden lg:block AdminSidebar",children:(0,i.jsx)(Admin_AdminSidebar,{})}),(0,i.jsx)(r.Z,{xs:24,lg:20,className:"md:bg-[#F5F8FB]",children:(0,i.jsx)("div",{className:"md:p-5",children:(0,i.jsx)("div",{className:"mx-2",children:e.children})})})]}):e.children})})}},3804:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return products}});var i=l(85893),a=l(69843),n=l(2307),r=l(67294),o=l(19702),d=l(58452),s=l(42419),c=l(86994),u=l(11163),v=l(5121),p=l(41664),h=l.n(p),x=l(86978),m=l(80979),g=l(25675),j=l.n(g),k=l(38293),N=l(56697),f=l(69855),C=l.n(f),DeleteModal_DeleteModal=e=>{let{deleteBtn:t,deleteFun:l,id:a}=e,[n,o]=(0,r.useState)(!1),handleCancel=()=>{o(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"p-0",onClick:()=>{o(!0)},children:t}),(0,i.jsx)(N.Z,{centered:!0,title:!1,footer:!1,open:n,onCancel:handleCancel,children:(0,i.jsx)("div",{className:C().DeleteModal,children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h2",{className:"mt-4 text-[19px]",children:"Are you sure you want to delete?"}),(0,i.jsxs)("div",{className:C().buttons,children:[(0,i.jsx)("button",{onClick:handleCancel,children:"No"}),(0,i.jsx)("button",{onClick:()=>{l(a),handleCancel()},children:"Yes"})]})]})})})]})},_=l(9051),y=l.n(_);let BulkProductsUpload=e=>{let{updateParentData:t}=e,[l,a]=(0,r.useState)(null),[n,o]=(0,r.useState)(!1),[d,s]=(0,r.useState)(!1),transformImages=e=>{let t=Object.keys(e).filter(e=>e.startsWith("Image")),l=t.map(t=>e[t]).filter(e=>e);return{Pictures:l}},handleUpload=async()=>{if(!l)return;o(!0);let e=new FileReader;e.onload=async e=>{let l;o(!1);try{l=JSON.parse(e.target.result)}catch(e){(0,x.hW)("Invalid JSON file");return}let i=l.map(e=>{var t;let l=null==e?void 0:null===(t=e.Categories)||void 0===t?void 0:t.split(" > "),i=(null==l?void 0:l.slice(-2)).map(e=>isNaN(e)||isNaN(parseFloat(e))?e:"All Other Parts");return l&&l.length>0?{...e,Part:i[0],PartAccessorries:i[1],...transformImages(e)}:e});if(s(!0),!(null==i?void 0:i.includes(null)))try{let e=await v.Z.post("".concat("https://www.shahparts.com/api","/products/bulk-upload"),{products:i},{headers:{authorization:"Bearer "+localStorage.getItem("token")}});s(!1),"OK"===e.statusText?((0,x.Ik)(e.data.successMessage),t()):(0,x.hW)(e.data.errorMessage)}catch(e){s(!1),console.log(e),(0,x.hW)(null==e?void 0:e.message)}},e.readAsText(l)};return(0,i.jsxs)("div",{className:y().BulkProductsUpload,children:[(0,i.jsx)("div",{children:(0,i.jsx)("h1",{children:"Bulk Upload JSON File"})}),(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"file",accept:".json",onChange:e=>{a(e.target.files[0])}})}),(0,i.jsx)("div",{children:(0,i.jsx)(k.C,{text:"Upload",loading:d||n,disabled:d||n,onClick:handleUpload})})]})};var products=()=>{let e=(0,u.useRouter)(),[t,l]=(0,r.useState)(!1),[p,g]=(0,r.useState)([]),[N,f]=(0,r.useState)(1),[C,_]=(0,r.useState)(),y="TOYOTA > Mark X > Transmission & Drivetrain > Propeller Shafts".split(" > ");console.log(null==y?void 0:y.slice(-2));let getAllData=async()=>{l(!0),await v.Z.post("".concat("https://www.shahparts.com/api","/products/get"),{page:N-1,pageSize:"20"}).then(e=>{if(l(!1),200===e.status){var t;g(null===(t=e.data)||void 0===t?void 0:t.products),_(e.data.count)}else(0,x.hW)(e.data.errorMessage)}).catch(e=>{l(!1),console.log(e)})};(0,r.useEffect)(()=>(getAllData(),()=>{}),[N]);let deleteHandler=async e=>{await v.Z.delete("".concat("https://www.shahparts.com/api","/products/delete/").concat(e),{headers:{authorization:"Bearer "+localStorage.getItem("token")}}).then(e=>{"OK"===e.statusText?((0,x.Ik)(e.data.successMessage),getAllData()):(0,x.hW)(e.data.errorMessage)}).catch(e=>{console.log(e),(0,x.hW)(null==e?void 0:e.message)})},P=[{title:"#",key:"index",render:(e,t,l)=>(0,i.jsx)("div",{children:(N-1)*20+l+1})},{title:"ID",dataIndex:"_id",key:"_id",sorter:(e,t)=>(null==e?void 0:e._id)>(null==t?void 0:t._id),render:(e,t)=>{let{_id:l}=t;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"text-[#0094DA] text-[12px] font-[500]",children:l})})}},{title:"Title",dataIndex:"Title",key:"Title",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.Title)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.Title)},render:(e,t)=>{let{Title:l}=t;return(0,i.jsx)("p",{className:"textElipsisTwoLines",children:l})}},{title:"Price",dataIndex:"Price",key:"Price",sorter:(e,t)=>(null==e?void 0:e.Price)-(null==t?void 0:t.Price)},{title:"Description",dataIndex:"Description",key:"Description",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.Description)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.Description)},render:(e,t)=>{let{Description:l}=t;return(0,i.jsx)("p",{className:"textElipsisTwoLines",children:l})}},{title:"Make",dataIndex:"Make",key:"Make",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.Make)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.Make)}},{title:"Model",dataIndex:"Model",key:"Model",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.Model)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.Model)}},{title:"Part",dataIndex:"Part",key:"Part",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.Part)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.Part)}},{title:"Part Accessorries",dataIndex:"PartAccessorries",key:"PartAccessorries",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.PartAccessorries)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.PartAccessorries)}},{title:"Location",dataIndex:"Location",key:"Location",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.Location)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.Location)}},{title:"Condition",dataIndex:"Condition",key:"Condition",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.Condition)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.Condition)}},{title:"Model Code",dataIndex:"ModelCode",key:"ModelCode",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.ModelCode)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.ModelCode)}},{title:"Reg Year/Month",dataIndex:"RegistrationYear",key:"RegistrationYear",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.RegistrationYear)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.RegistrationYear)}},{title:"Mileage",dataIndex:"Mileage",key:"Mileage",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.Mileage)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.Mileage)}},{title:"Mission Type",dataIndex:"MissionType",key:"MissionType",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.MissionType)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.MissionType)}},{title:"Engine Model",dataIndex:"EngineModel",key:"EngineModel",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.EngineModel)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.EngineModel)}},{title:"Engine Size",dataIndex:"EngineSize",key:"EngineSize",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.EngineSize)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.EngineSize)}},{title:"Fuel",dataIndex:"Fuel",key:"Fuel",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.Fuel)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.Fuel)}},{title:"Drive",dataIndex:"Drive",key:"Drive",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.Drive)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.Drive)}},{title:"Auto Parts Maker",dataIndex:"PutoPartsMaker",key:"PutoPartsMaker",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.PutoPartsMaker)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.PutoPartsMaker)}},{title:"Genuine Parts No.",dataIndex:"GenuinePartsNo",key:"GenuinePartsNo",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.GenuinePartsNo)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.GenuinePartsNo)}},{title:"Chassis No.",dataIndex:"ChassisNo",key:"ChassisNo",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.ChassisNo)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.ChassisNo)}},{title:"Ref No.",dataIndex:"RefNo",key:"RefNo",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.RefNo)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.RefNo)}},{title:"Gear Type",dataIndex:"GearType",key:"GearType",sorter:(e,t)=>{var l;return null==e?void 0:null===(l=e.GearType)||void 0===l?void 0:l.localeCompare(null==t?void 0:t.GearType)}},{title:"Pictures",dataIndex:"Pictures",key:"Pictures",render:(e,t)=>{let{Pictures:l}=t;return(0,i.jsx)("div",{className:"flex gap-2 flex-wrap items-center w-[130px]",children:(null==l?void 0:l.length)>0&&(null==l?void 0:l.map(e=>(0,i.jsx)(j(),{src:e,width:32,height:32,style:{width:"32px",height:"32px"},alt:"Product"})))})}},{title:"Actions",render:(t,l)=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)(h(),{href:"/product/"+l._id,children:(0,i.jsx)(s.default,{})}),(0,i.jsx)(d.default,{onClick:()=>e.push("/admin/update-product/".concat(l._id))}),(0,i.jsx)(DeleteModal_DeleteModal,{id:null==l?void 0:l._id,deleteFun:deleteHandler,deleteBtn:(0,i.jsx)(o.default,{style:{verticalAlign:"middle"}})})]})})}];return console.log("TOYOTA > Soarer > 2001 > UA-UZZ40 > Body Parts > Fenders".split(" > ")[5]),(0,i.jsx)(m.Z,{sidebar:!0,children:(0,i.jsxs)("div",{className:"Pages pt-6",children:[(0,i.jsxs)("div",{className:"md:flex justify-between flex-wrap items-start pb-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex gap-2 justify-start items-center pb-4",children:[(0,i.jsx)("span",{children:"Admin"})," ",(0,i.jsx)(c.default,{})," ",(0,i.jsx)("div",{className:"text-[#0094DA] bg-transparent",children:"Products"})]}),(0,i.jsx)("h1",{className:"text-[33px] font-bold",children:"Products"})]}),(0,i.jsx)("div",{className:"mt-8 md:mt-0",children:(0,i.jsx)(k.C,{type:"primary",onClick:()=>e.push("/admin/create-product"),htmlType:"submit",loading:t,disabled:t,text:"Add Product"})})]}),(0,i.jsx)(BulkProductsUpload,{updateParentData:getAllData}),(0,i.jsxs)("div",{className:"hidden md:block bg-white",children:[(0,i.jsxs)("h3",{className:"p-4 text-[28px]",children:["Total Results: ",C]}),(0,i.jsx)(n.Z,{loading:t,showSorterTooltip:!0,columns:P,pagination:!1,dataSource:p})]}),(0,i.jsx)("div",{className:"flex justify-center my-10",children:(0,i.jsx)(a.default,{current:N,defaultPageSize:20,showSizeChanger:!1,onChange:e=>f(e),total:C})})]})})}},9051:function(e){e.exports={BulkProductsUpload:"BulkProductsUpload_BulkProductsUpload__TL9TA"}},87893:function(e){e.exports={ButtonComp:"ButtonComp_ButtonComp__irX7_"}},69855:function(e){e.exports={DeleteModal:"DeleteModal_DeleteModal__HE1Sq",buttons:"DeleteModal_buttons__VnPhI"}},73771:function(e){e.exports={AdminSidebar:"AdminSidebar_AdminSidebar__6eFiO",linkContainer:"AdminSidebar_linkContainer__8QIYH",linkWrapper:"AdminSidebar_linkWrapper__4rIoI",activeLink:"AdminSidebar_activeLink__ocl97",inactiveLink:"AdminSidebar_inactiveLink__ZRV86",logoutWrapper:"AdminSidebar_logoutWrapper__loysx",logoutButton:"AdminSidebar_logoutButton__Ih4Gk",logoutText:"AdminSidebar_logoutText__ug7Ml"}}},function(e){e.O(0,[4055,4807,1059,2872,117,6697,9774,2888,179],function(){return e(e.s=42678)}),_N_E=e.O()}]);