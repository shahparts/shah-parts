(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2222],{72590:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return s(14496)}])},86571:function(e,t,s){"use strict";var l=s(85893);s(67294);var r=s(94704),n=s(89552),a=s(63780),i=s(42459),o=s(97362);let{Step:c}=r.default;t.Z=e=>{let{loading:t,step:s}=e;return(0,l.jsx)(n.default,{spinning:t,children:(0,l.jsxs)(r.default,{current:s,children:[(0,l.jsx)(c,{title:"Cart",icon:(0,l.jsx)(i.Z,{}),description:"Items added to cart"}),(0,l.jsx)(c,{title:"Checkout and Payment",icon:(0,l.jsx)(a.Z,{}),description:"Address is filled and Payment is done"}),(0,l.jsx)(c,{title:"Order Complete",icon:(0,l.jsx)(o.Z,{}),description:"Order is completed"})]})})}},38293:function(e,t,s){"use strict";s.d(t,{C:function(){return ButtonComp}});var l=s(85893),r=s(65400),n=s.n(r),a=s(87893),i=s.n(a);let ButtonComp=e=>{let{text:t,type:s,onClick:r,disabled:a,loading:o}=e;return(0,l.jsx)(n(),{className:i().ButtonComp,htmlType:s,onClick:r,disabled:a,loading:o,children:t})}},14496:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return checkout}});var l=s(85893),r=s(67294),n=s(10368),a=s.n(n),i=s(5789),o=s(74253),c=s(97538),d=s(51024),u=s(55673),h=s(86978),p=s(38293),m=s(11163),x=s(30381),j=s.n(x),_=s(5121),f=s(80912),v=s(45770),g=s(72635),N=s.n(g),b=s(86571),k=s(75021);let y={layout:"vertical"},PaypalButtonWrapper=e=>{let{currency:t,showSpinner:s,placeOrder:n,amount:a}=e,[{options:i,isPending:o},c]=(0,k.Up)();return(0,r.useEffect)(()=>{c({type:"resetOptions",value:{...i,currency:t}})},[t,s]),(0,l.jsxs)(l.Fragment,{children:[s&&o&&(0,l.jsx)("div",{className:"spinner"}),(0,l.jsx)(k.ch,{forceReRender:[a,t,y],createOrder:(e,s)=>s.order.create({purchase_units:[{amount:{currency_code:t,value:a}}]}).then(e=>e),onApprove:function(e,t){return console.log(e),t.order.capture().then(function(e){n(e)})}})]})};var C=s(41664),A=s.n(C),checkout=()=>{let{TextArea:e}=d.default,[t]=c.Z.useForm(),s=(0,m.useRouter)(),[n,x]=(0,r.useState)(!1),[g,y]=(0,r.useState)({}),[C,S]=(0,r.useState)(!1),[Z,w]=(0,r.useState)(""),[T,I]=(0,r.useState)(!1),[P,E]=(0,r.useState)({}),[B,D]=(0,r.useState)({}),{cart:O,clearCart:F}=(0,v.i)();(0,r.useMemo)(()=>N()().getData(),[]);let M=null==O?void 0:O.reduce((e,t)=>e+parseInt(null==t?void 0:t.Price)*parseInt(null==t?void 0:t.qtyToShop),0),transactionSuccess=async e=>{var t,l;await _.Z.post("".concat("https://www.shahparts.com/api","/orders/place-order"),{notes:Z,placed:j()().format("DD/MM/YYYY"),subTotal:M,shipping:0,paymentMethod:"Paypal",totalAmount:M+0,user:{email:null==P?void 0:P.email,fullName:null==P?void 0:P.fullName},cartProducts:O,billingAddress:P,shippingAddress:B,paymentData:e,userId:null===(t=(0,f.$8)())||void 0===t?void 0:t._id,email:null===(l=(0,f.$8)())||void 0===l?void 0:l.email},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(e=>{console.log(e),200===e.status?(F(),(0,h.Ik)(e.data.successMessage),setTimeout(()=>{(0,f.$8)()?s.push("/user/orders"):s.push("/")},2e3)):(0,h.hW)(e.data.errorMessage)}).catch(e=>{x(!1),console.log(e),(0,h.hW)(null==e?void 0:e.message)})};return(0,l.jsxs)("div",{className:a().checkout,children:[(0,l.jsx)("div",{className:"p-[30px]",children:(0,l.jsx)(b.Z,{step:1,loading:n})}),(0,l.jsx)("h1",{className:"".concat(a().title," mainTitle"),children:"Checkout"}),(0,l.jsxs)(u.Z,{gutter:[23,23],children:[(0,l.jsx)(i.Z,{xs:24,md:17,children:(0,l.jsxs)("div",{className:"p-[17px] md:p-[20px]",style:{maxWidth:800},children:[(0,l.jsx)("div",{className:"pb-[23px]",children:(0,l.jsx)(A(),{className:"text-[23px] text-red-500",href:"/shop",children:"Continue Shopping ?"})}),C?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("h2",{className:"text-[28px]",children:["Please pay total amount of ",(0,l.jsxs)("b",{children:["$",M+0]})," to process your order."]}),(0,l.jsx)(k.Vv,{options:{"client-id":"AT1WWRJ4sJGTsCPueT8FZuNBYECFXJEGE2t2dOno0MCo3xk1zhuX6CbPhR8zv_yn7RZsRz4X8pYShmBo",components:"buttons",currency:"USD"},children:(0,l.jsx)(PaypalButtonWrapper,{amount:M+0,placeOrder:transactionSuccess,currency:"USD",showSpinner:!1})})]}):(0,l.jsx)(c.Z,{layout:"vertical",form:t,name:"nest-messages",className:a().form,initialValues:{billingAddress:{fullName:"",address:"",address2:""}},children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"mb-8",children:"Billing Details: "}),(0,l.jsx)(c.Z.Item,{name:["billingAddress","fullName"],label:"Full Name",rules:[{required:!0,message:"Please enter your Full Name!"}],children:(0,l.jsx)(d.default,{placeholder:"Enter Full Name"})}),(0,l.jsx)(u.Z,{gutter:[23,23],children:(0,l.jsxs)(i.Z,{xs:24,children:[(0,l.jsx)(c.Z.Item,{name:["billingAddress","address"],label:"Address",rules:[{required:!0,message:"Please enter your Address!"}],children:(0,l.jsx)(d.default,{placeholder:"Enter Address 2"})}),(0,l.jsx)(c.Z.Item,{name:["billingAddress","address2"],children:(0,l.jsx)(d.default,{placeholder:"Enter Apartment, suit, unit etc(optional)"})})]})})]})})]})}),(0,l.jsx)(i.Z,{xs:24,md:7,className:a().right,children:(0,l.jsxs)("div",{className:"p-[17px] md:p-[20px] mb-10 md:mb-0",children:[(0,l.jsx)("h3",{children:"Order Details:"}),null==O?void 0:O.map((e,t)=>(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("h4",{className:"font-bolder text-[16px] max-w-[170px]",children:[null==e?void 0:e.title," x ",null==e?void 0:e.qtyToShop]}),(0,l.jsx)("div",{className:"w-fit",children:(0,l.jsxs)("h4",{className:"font-bold text-[16px]",children:["$",parseInt(null==e?void 0:e.Price)*parseInt(null==e?void 0:e.qtyToShop)]})})]},t)),(0,l.jsx)(o.Z,{}),(0,l.jsxs)("div",{className:a().orderDetailItem,children:[(0,l.jsx)("h5",{children:"Sub Total"}),(0,l.jsxs)("h5",{children:["$",M]})]}),(0,l.jsxs)("div",{className:a().orderDetailItem,children:[(0,l.jsx)("h5",{children:"Shipping"}),(0,l.jsx)("a",{href:"https://wa.me/818050821650",target:"_blank",className:a().whatsApp,children:"Contact on Whatsapp"})]}),(0,l.jsxs)("div",{className:a().orderDetailItem,children:[(0,l.jsxs)("h5",{children:["Order Total ",(0,l.jsx)("br",{})]}),(0,l.jsxs)("h5",{children:["$",M]})]}),(0,l.jsx)("div",{children:(0,l.jsx)(p.C,{text:"MAKE PAYMENT",loading:n,disabled:n,onClick:()=>{t.submit();let{billingAddress:e}=t.getFieldsValue();(null==e?void 0:e.fullName)&&(null==e?void 0:e.address)&&(E(e),S(!0))}})})]})})]})]})}},87893:function(e){e.exports={ButtonComp:"ButtonComp_ButtonComp__irX7_"}},10368:function(e){e.exports={checkout:"checkout_checkout__zCm2g",title:"checkout_title__y4HGc",TextArea:"checkout_TextArea__tcVby",auth:"checkout_auth__TEiOH",form:"checkout_form__5zQIa",right:"checkout_right__tm1Gl",promotionCode:"checkout_promotionCode__iRB7C",orderDetailItem:"checkout_orderDetailItem___bhnc",whatsApp:"checkout_whatsApp__6LkXP"}}},function(e){e.O(0,[4885,4055,7538,2055,227,5168,9774,2888,179],function(){return e(e.s=72590)}),_N_E=e.O()}]);